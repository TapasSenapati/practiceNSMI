
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: #f4f4f9; margin: 0; }
        #quiz-container { background: white; padding: 2em; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); width: 90%; max-width: 600px; }
        #question { font-size: 1.2em; margin-bottom: 1em; }
        .options { list-style: none; padding: 0; }
        .options li { background: #f0f0f0; margin: 0.5em 0; padding: 1em; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; }
        .options li:hover { background: #e0e0e0; }
        .options li.selected { background: #d0e0ff; }
        .options li.correct { background: #d4edda; border-color: #c3e6cb; }
        .options li.incorrect { background: #f8d7da; border-color: #f5c6cb; }
        #navigation { margin-top: 1.5em; display: flex; justify-content: space-between; }
        button { padding: 0.8em 1.5em; border: none; background: #007BFF; color: white; border-radius: 5px; cursor: pointer; }
        button:disabled { background: #ccc; }
        #feedback { margin-top: 1em; padding: 1em; border-radius: 5px; display: none; }
        #feedback.correct { background: #d4edda; }
        #feedback.incorrect { background: #f8d7da; }
        #explanation { margin-top: 1em; font-style: italic; }
    </style>
</head>
<body>
    <div id="quiz-container">
        <div id="question-number"></div>
        <div id="question"></div>
        <ul class="options" id="options-list"></ul>
        <div id="feedback"></div>
        <div id="explanation"></div>
        <div id="navigation">
            <button id="prev-btn" onclick="prevQuestion()">Previous</button>
            <button id="next-btn" onclick="nextQuestion()">Next</button>
        </div>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let questions = [];
        let userAnswers = [];

        const questionEl = document.getElementById('question');
        const questionNumberEl = document.getElementById('question-number');
        const optionsListEl = document.getElementById('options-list');
        const feedbackEl = document.getElementById('feedback');
        const explanationEl = document.getElementById('explanation');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        window.onload = async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const topic = urlParams.get('topic');
            if (topic) {
                try {
                    const response = await fetch(`${topic}.json`); // Corrected to add .json extension
                    if (!response.ok) throw new Error('Quiz data not found');
                    questions = await response.json();
                    userAnswers = new Array(questions.length).fill(null);
                    displayQuestion();
                } catch (error) {
                    questionEl.textContent = 'Error loading quiz: ' + error.message;
                }
            } else {
                questionEl.textContent = 'No quiz topic selected.';
            }
        };

        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            questionNumberEl.textContent = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
            questionEl.textContent = question.question;
            optionsListEl.innerHTML = '';
            feedbackEl.style.display = 'none';
            explanationEl.textContent = '';

            question.options.forEach((option, index) => {
                const li = document.createElement('li');
                li.textContent = option;
                li.onclick = () => selectOption(index);
                if (userAnswers[currentQuestionIndex] !== null) {
                    li.style.pointerEvents = 'none'; // Disable clicking after answered
                    if (index === question.correctAnswerIndex) {
                        li.classList.add('correct');
                    } else if (index === userAnswers[currentQuestionIndex]) {
                        li.classList.add('incorrect');
                    }
                }
                 if (userAnswers[currentQuestionIndex] === index) {
                    li.classList.add('selected');
                }
                optionsListEl.appendChild(li);
            });

            if (userAnswers[currentQuestionIndex] !== null) {
                showFeedback();
            }

            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = currentQuestionIndex === questions.length - 1;
        }

        function selectOption(index) {
            if (userAnswers[currentQuestionIndex] !== null) return; // Prevent changing answer

            userAnswers[currentQuestionIndex] = index;
            showFeedback();
            displayQuestion(); // Re-render to show correct/incorrect colors
        }

        function showFeedback() {
            const question = questions[currentQuestionIndex];
            const userAnswer = userAnswers[currentQuestionIndex];
            if (userAnswer === question.correctAnswerIndex) {
                feedbackEl.textContent = 'Correct!';
                feedbackEl.className = 'correct';
            } else {
                feedbackEl.textContent = 'Incorrect.';
                feedbackEl.className = 'incorrect';
            }
            feedbackEl.style.display = 'block';
            explanationEl.textContent = `Explanation: ${question.explanation}`;
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            }
        }
    </script>
</body>
</html>
